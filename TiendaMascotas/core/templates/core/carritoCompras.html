{% extends 'core/base.html' %}

{% load static %}

{% block stylesheet %}
    
{% endblock stylesheet %}

{% block content %}


  <!-- Tabla -->
  <div class="d-flex-column justify-content-center m-3">
    <h2 class="fs-1 container justify-content-center">
        Carrito de compras
      </h2>
    <table class="table table-bordered container justify-content-center">
      <thead>
        <tr class="table-light">
          <th> ID </th>
          <th> Categor√≠a </th>
          <th> Producto </th>
          <th> Precio </th>
          <th> % Descto <br> Subscriptor </th>
          <th> % Descto <br> Oferta </th>
          <th> % Descto <br> Total </th>
          <th class="text-end"> Descuentos </th>
          <th class="text-end"> Precio a pagar </th>
          <th> Opciones </th>
        </tr>
      </thead>
      <tbody>
        {% for item in detalle_carrito %}
          <tr>
            <td> {{ item.id }} </td>
                    <td> {{ item.producto.categoria.nombre }} </td>
                    <td> {{ item.producto.nombre }} </td>
                    <td> {{ item.precio }} </td>
                    <td> %{{ item.descuento_subscriptor }} </td>
                    <td> %{{ item.descuento_oferta }} </td>
                    <td> %{{ item.descuento_total }} </td>
                    <td class="text-end"> {{ item.descuentos }} </td>
                    <td class="text-end"> {{ item.precio_a_pagar }} </td>
                    <td>
                        <div class="btn-group">
                            <a href="{% url 'producto.detalle' item.producto.id %}" class="btn btn-sm btn-primary"> Detalle </a> 
                            <a href="{% url 'eliminar_producto_en_carrito' item.id %}" class="btn btn-sm btn-danger"> Eliminar </a> 
                        </div>
                    </td>
          </tr>
        {% endfor %}
      </tbody>

    </table>

    <div class="d-flex container justify-content-end">
      <form>
        <div class="d-flex mb-3">
          <label for="exampleInputEmail1" class="form-label">Precio sin IVA</label>
          <input type="email" class="form-control text-end" id="exampleInputEmail1" aria-describedby="readonly input"
            value="${{ monto_sin_iva }}" disabled>
        </div>
        <div class="d-flex mb-3">
          <label for="exampleInputEmail1" class="form-label">Valor del IVA (19%)</label>
          <input type="email" class="form-control text-end" id="exampleInputEmail1" aria-describedby="readonly input"
            value="${{ iva }}" disabled>
        </div>
        <div class="d-flex mb-3">
          <label for="exampleInputEmail1" class="form-label">Total a pagar</label>
          <input type="email" class="form-control text-end" id="exampleInputEmail1" aria-describedby="emailHelp"
            value="${{ total_a_pagar }}" disabled>
        </div>
        <div class="d-flex gap-4">
          <button type="submit" class="btn btn-primary">Cancelar compra</button>
          <button type="submit" class="btn btn-primary">Pagar</button>
      </div>
      </form>
    </div>
  </div>

  <!-- Form -->
  
    
{% endblock content %}

{% block script %}
  <!-- Mis scripts -->
  <script src="{% static 'core/js/carga_elementos.js' %}"></script>
{% endblock script %}


  

 